{"ast":null,"code":"var fiveMinutes = 5 * 60 * 1000;\n/**\n * Wrap a dataProvider in a Proxy that modifies responses to add caching.\n *\n * This proxy adds a validUntil field to the response of read queries\n * (getList, getMany, getOne) so that the useDataProvider enables caching\n * for these calls.\n *\n * @param {DataProvider} dataProvider A data provider object\n * @param {number} duration Cache duration in milliseconds. Defaults to 5 minutes.\n *\n * @example\n *\n * import { cacheDataProviderProxy } from 'ra-core';\n *\n * const cacheEnabledDataProvider = cacheDataProviderProxy(dataProvider);\n */\nexport default (function (dataProvider, duration) {\n  if (duration === void 0) {\n    duration = fiveMinutes;\n  }\n  return new Proxy(dataProvider, {\n    get: function (target, name) {\n      if (typeof name === 'symbol') {\n        return;\n      }\n      return function (resource, params) {\n        if (name === 'getList' || name === 'getMany' || name === 'getOne') {\n          // @ts-ignore\n          return dataProvider[name](resource, params).then(function (response) {\n            var validUntil = new Date();\n            validUntil.setTime(validUntil.getTime() + duration);\n            response.validUntil = validUntil;\n            return response;\n          });\n        }\n        return dataProvider[name](resource, params);\n      };\n    }\n  });\n});","map":{"version":3,"names":["fiveMinutes","dataProvider","duration","Proxy","get","target","name","resource","params","then","response","validUntil","Date","setTime","getTime"],"sources":["/node_modules/ra-core/esm/dataProvider/cacheDataProviderProxy.js"],"sourcesContent":["var fiveMinutes = 5 * 60 * 1000;\n/**\n * Wrap a dataProvider in a Proxy that modifies responses to add caching.\n *\n * This proxy adds a validUntil field to the response of read queries\n * (getList, getMany, getOne) so that the useDataProvider enables caching\n * for these calls.\n *\n * @param {DataProvider} dataProvider A data provider object\n * @param {number} duration Cache duration in milliseconds. Defaults to 5 minutes.\n *\n * @example\n *\n * import { cacheDataProviderProxy } from 'ra-core';\n *\n * const cacheEnabledDataProvider = cacheDataProviderProxy(dataProvider);\n */\nexport default (function (dataProvider, duration) {\n    if (duration === void 0) { duration = fiveMinutes; }\n    return new Proxy(dataProvider, {\n        get: function (target, name) {\n            if (typeof name === 'symbol') {\n                return;\n            }\n            return function (resource, params) {\n                if (name === 'getList' ||\n                    name === 'getMany' ||\n                    name === 'getOne') {\n                    // @ts-ignore\n                    return dataProvider[name](resource, params).then(function (response) {\n                        var validUntil = new Date();\n                        validUntil.setTime(validUntil.getTime() + duration);\n                        response.validUntil = validUntil;\n                        return response;\n                    });\n                }\n                return dataProvider[name](resource, params);\n            };\n        },\n    });\n});\n"],"mappings":"AAAA,IAAIA,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,UAAUC,YAAY,EAAEC,QAAQ,EAAE;EAC9C,IAAIA,QAAQ,KAAK,KAAK,CAAC,EAAE;IAAEA,QAAQ,GAAGF,WAAW;EAAE;EACnD,OAAO,IAAIG,KAAK,CAACF,YAAY,EAAE;IAC3BG,GAAG,EAAE,SAAAA,CAAUC,MAAM,EAAEC,IAAI,EAAE;MACzB,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QAC1B;MACJ;MACA,OAAO,UAAUC,QAAQ,EAAEC,MAAM,EAAE;QAC/B,IAAIF,IAAI,KAAK,SAAS,IAClBA,IAAI,KAAK,SAAS,IAClBA,IAAI,KAAK,QAAQ,EAAE;UACnB;UACA,OAAOL,YAAY,CAACK,IAAI,CAAC,CAACC,QAAQ,EAAEC,MAAM,CAAC,CAACC,IAAI,CAAC,UAAUC,QAAQ,EAAE;YACjE,IAAIC,UAAU,GAAG,IAAIC,IAAI,EAAE;YAC3BD,UAAU,CAACE,OAAO,CAACF,UAAU,CAACG,OAAO,EAAE,GAAGZ,QAAQ,CAAC;YACnDQ,QAAQ,CAACC,UAAU,GAAGA,UAAU;YAChC,OAAOD,QAAQ;UACnB,CAAC,CAAC;QACN;QACA,OAAOT,YAAY,CAACK,IAAI,CAAC,CAACC,QAAQ,EAAEC,MAAM,CAAC;MAC/C,CAAC;IACL;EACJ,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module"}
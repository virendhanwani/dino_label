{"ast":null,"code":"import get from 'lodash/get';\nexport var canReplyWithCache = function (type, payload, resourceState) {\n  var now = new Date();\n  switch (type) {\n    case 'getList':\n      return get(resourceState, ['list', 'cachedRequests', JSON.stringify(payload), 'validity']) > now;\n    case 'getOne':\n      return resourceState && resourceState.validity && resourceState.validity[payload.id] > now;\n    case 'getMany':\n      return resourceState && resourceState.validity && payload.ids.every(function (id) {\n        return resourceState.validity[id] > now;\n      });\n    default:\n      return false;\n  }\n};\nexport var getResultFromCache = function (type, payload, resourceState) {\n  switch (type) {\n    case 'getList':\n      {\n        var data_1 = resourceState.data;\n        var requestSignature = JSON.stringify(payload);\n        var cachedRequest = resourceState.list.cachedRequests[requestSignature];\n        return {\n          data: cachedRequest.ids.map(function (id) {\n            return data_1[id];\n          }),\n          total: cachedRequest.total\n        };\n      }\n    case 'getOne':\n      return {\n        data: resourceState.data[payload.id]\n      };\n    case 'getMany':\n      return {\n        data: payload.ids.map(function (id) {\n          return resourceState.data[id];\n        })\n      };\n    default:\n      throw new Error('cannot reply with cache for this method');\n  }\n};","map":{"version":3,"names":["get","canReplyWithCache","type","payload","resourceState","now","Date","JSON","stringify","validity","id","ids","every","getResultFromCache","data_1","data","requestSignature","cachedRequest","list","cachedRequests","map","total","Error"],"sources":["/node_modules/ra-core/esm/dataProvider/replyWithCache.js"],"sourcesContent":["import get from 'lodash/get';\nexport var canReplyWithCache = function (type, payload, resourceState) {\n    var now = new Date();\n    switch (type) {\n        case 'getList':\n            return (get(resourceState, [\n                'list',\n                'cachedRequests',\n                JSON.stringify(payload),\n                'validity',\n            ]) > now);\n        case 'getOne':\n            return (resourceState &&\n                resourceState.validity &&\n                resourceState.validity[payload.id] > now);\n        case 'getMany':\n            return (resourceState &&\n                resourceState.validity &&\n                payload.ids.every(function (id) { return resourceState.validity[id] > now; }));\n        default:\n            return false;\n    }\n};\nexport var getResultFromCache = function (type, payload, resourceState) {\n    switch (type) {\n        case 'getList': {\n            var data_1 = resourceState.data;\n            var requestSignature = JSON.stringify(payload);\n            var cachedRequest = resourceState.list.cachedRequests[requestSignature];\n            return {\n                data: cachedRequest.ids.map(function (id) { return data_1[id]; }),\n                total: cachedRequest.total,\n            };\n        }\n        case 'getOne':\n            return { data: resourceState.data[payload.id] };\n        case 'getMany':\n            return {\n                data: payload.ids.map(function (id) { return resourceState.data[id]; }),\n            };\n        default:\n            throw new Error('cannot reply with cache for this method');\n    }\n};\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,YAAY;AAC5B,OAAO,IAAIC,iBAAiB,GAAG,SAAAA,CAAUC,IAAI,EAAEC,OAAO,EAAEC,aAAa,EAAE;EACnE,IAAIC,GAAG,GAAG,IAAIC,IAAI,EAAE;EACpB,QAAQJ,IAAI;IACR,KAAK,SAAS;MACV,OAAQF,GAAG,CAACI,aAAa,EAAE,CACvB,MAAM,EACN,gBAAgB,EAChBG,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC,EACvB,UAAU,CACb,CAAC,GAAGE,GAAG;IACZ,KAAK,QAAQ;MACT,OAAQD,aAAa,IACjBA,aAAa,CAACK,QAAQ,IACtBL,aAAa,CAACK,QAAQ,CAACN,OAAO,CAACO,EAAE,CAAC,GAAGL,GAAG;IAChD,KAAK,SAAS;MACV,OAAQD,aAAa,IACjBA,aAAa,CAACK,QAAQ,IACtBN,OAAO,CAACQ,GAAG,CAACC,KAAK,CAAC,UAAUF,EAAE,EAAE;QAAE,OAAON,aAAa,CAACK,QAAQ,CAACC,EAAE,CAAC,GAAGL,GAAG;MAAE,CAAC,CAAC;IACrF;MACI,OAAO,KAAK;EAAC;AAEzB,CAAC;AACD,OAAO,IAAIQ,kBAAkB,GAAG,SAAAA,CAAUX,IAAI,EAAEC,OAAO,EAAEC,aAAa,EAAE;EACpE,QAAQF,IAAI;IACR,KAAK,SAAS;MAAE;QACZ,IAAIY,MAAM,GAAGV,aAAa,CAACW,IAAI;QAC/B,IAAIC,gBAAgB,GAAGT,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;QAC9C,IAAIc,aAAa,GAAGb,aAAa,CAACc,IAAI,CAACC,cAAc,CAACH,gBAAgB,CAAC;QACvE,OAAO;UACHD,IAAI,EAAEE,aAAa,CAACN,GAAG,CAACS,GAAG,CAAC,UAAUV,EAAE,EAAE;YAAE,OAAOI,MAAM,CAACJ,EAAE,CAAC;UAAE,CAAC,CAAC;UACjEW,KAAK,EAAEJ,aAAa,CAACI;QACzB,CAAC;MACL;IACA,KAAK,QAAQ;MACT,OAAO;QAAEN,IAAI,EAAEX,aAAa,CAACW,IAAI,CAACZ,OAAO,CAACO,EAAE;MAAE,CAAC;IACnD,KAAK,SAAS;MACV,OAAO;QACHK,IAAI,EAAEZ,OAAO,CAACQ,GAAG,CAACS,GAAG,CAAC,UAAUV,EAAE,EAAE;UAAE,OAAON,aAAa,CAACW,IAAI,CAACL,EAAE,CAAC;QAAE,CAAC;MAC1E,CAAC;IACL;MACI,MAAM,IAAIY,KAAK,CAAC,yCAAyC,CAAC;EAAC;AAEvE,CAAC"},"metadata":{},"sourceType":"module"}
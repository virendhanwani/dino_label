{"ast":null,"code":"var isMatchingReferencesError = function (matchingReferences) {\n  return matchingReferences && matchingReferences.error !== undefined;\n};\nexport var getStatusForInput = function (_a) {\n  var input = _a.input,\n    matchingReferences = _a.matchingReferences,\n    referenceRecord = _a.referenceRecord,\n    _b = _a.translate,\n    translate = _b === void 0 ? function (x) {\n      return x;\n    } : _b;\n  var matchingReferencesError = isMatchingReferencesError(matchingReferences) ? translate(matchingReferences.error, {\n    _: matchingReferences.error\n  }) : null;\n  var selectedReferenceError = input.value && !referenceRecord ? translate('ra.input.references.single_missing', {\n    _: 'ra.input.references.single_missing'\n  }) : null;\n  return {\n    waiting: input.value && selectedReferenceError && !matchingReferences || !input.value && !matchingReferences,\n    error: input.value && selectedReferenceError && matchingReferencesError || !input.value && matchingReferencesError ? input.value ? selectedReferenceError : matchingReferencesError : null,\n    warning: selectedReferenceError || matchingReferencesError,\n    choices: Array.isArray(matchingReferences) ? matchingReferences : [referenceRecord].filter(function (choice) {\n      return choice;\n    })\n  };\n};\nexport var REFERENCES_STATUS_READY = 'REFERENCES_STATUS_READY';\nexport var REFERENCES_STATUS_INCOMPLETE = 'REFERENCES_STATUS_INCOMPLETE';\nexport var REFERENCES_STATUS_EMPTY = 'REFERENCES_STATUS_EMPTY';\nexport var getSelectedReferencesStatus = function (input, referenceRecords) {\n  return !input.value || input.value.length === referenceRecords.length ? REFERENCES_STATUS_READY : referenceRecords.length > 0 ? REFERENCES_STATUS_INCOMPLETE : REFERENCES_STATUS_EMPTY;\n};\nexport var getStatusForArrayInput = function (_a) {\n  var input = _a.input,\n    matchingReferences = _a.matchingReferences,\n    referenceRecords = _a.referenceRecords,\n    _b = _a.translate,\n    translate = _b === void 0 ? function (x) {\n      return x;\n    } : _b;\n  // selectedReferencesDataStatus can be \"empty\" (no data was found for references from input.value)\n  // or \"incomplete\" (Not all of the reference data was found)\n  // or \"ready\" (all references data was found or there is no references from input.value)\n  var selectedReferencesDataStatus = getSelectedReferencesStatus(input, referenceRecords);\n  var matchingReferencesError = isMatchingReferencesError(matchingReferences) ? translate(matchingReferences.error, {\n    _: matchingReferences.error\n  }) : null;\n  return {\n    waiting: !matchingReferences && input.value && selectedReferencesDataStatus === REFERENCES_STATUS_EMPTY || !matchingReferences && !input.value,\n    error: matchingReferencesError && (!input.value || input.value && selectedReferencesDataStatus === REFERENCES_STATUS_EMPTY) ? translate('ra.input.references.all_missing', {\n      _: 'ra.input.references.all_missing'\n    }) : null,\n    warning: matchingReferencesError || input.value && selectedReferencesDataStatus !== REFERENCES_STATUS_READY ? matchingReferencesError || translate('ra.input.references.many_missing', {\n      _: 'ra.input.references.many_missing'\n    }) : null,\n    choices: Array.isArray(matchingReferences) ? matchingReferences : referenceRecords\n  };\n};","map":{"version":3,"names":["isMatchingReferencesError","matchingReferences","error","undefined","getStatusForInput","_a","input","referenceRecord","_b","translate","x","matchingReferencesError","_","selectedReferenceError","value","waiting","warning","choices","Array","isArray","filter","choice","REFERENCES_STATUS_READY","REFERENCES_STATUS_INCOMPLETE","REFERENCES_STATUS_EMPTY","getSelectedReferencesStatus","referenceRecords","length","getStatusForArrayInput","selectedReferencesDataStatus"],"sources":["/node_modules/ra-core/esm/controller/input/referenceDataStatus.js"],"sourcesContent":["var isMatchingReferencesError = function (matchingReferences) {\n    return matchingReferences && matchingReferences.error !== undefined;\n};\nexport var getStatusForInput = function (_a) {\n    var input = _a.input, matchingReferences = _a.matchingReferences, referenceRecord = _a.referenceRecord, _b = _a.translate, translate = _b === void 0 ? function (x) { return x; } : _b;\n    var matchingReferencesError = isMatchingReferencesError(matchingReferences)\n        ? translate(matchingReferences.error, {\n            _: matchingReferences.error,\n        })\n        : null;\n    var selectedReferenceError = input.value && !referenceRecord\n        ? translate('ra.input.references.single_missing', {\n            _: 'ra.input.references.single_missing',\n        })\n        : null;\n    return {\n        waiting: (input.value && selectedReferenceError && !matchingReferences) ||\n            (!input.value && !matchingReferences),\n        error: (input.value &&\n            selectedReferenceError &&\n            matchingReferencesError) ||\n            (!input.value && matchingReferencesError)\n            ? input.value\n                ? selectedReferenceError\n                : matchingReferencesError\n            : null,\n        warning: selectedReferenceError || matchingReferencesError,\n        choices: Array.isArray(matchingReferences)\n            ? matchingReferences\n            : [referenceRecord].filter(function (choice) { return choice; }),\n    };\n};\nexport var REFERENCES_STATUS_READY = 'REFERENCES_STATUS_READY';\nexport var REFERENCES_STATUS_INCOMPLETE = 'REFERENCES_STATUS_INCOMPLETE';\nexport var REFERENCES_STATUS_EMPTY = 'REFERENCES_STATUS_EMPTY';\nexport var getSelectedReferencesStatus = function (input, referenceRecords) {\n    return !input.value || input.value.length === referenceRecords.length\n        ? REFERENCES_STATUS_READY\n        : referenceRecords.length > 0\n            ? REFERENCES_STATUS_INCOMPLETE\n            : REFERENCES_STATUS_EMPTY;\n};\nexport var getStatusForArrayInput = function (_a) {\n    var input = _a.input, matchingReferences = _a.matchingReferences, referenceRecords = _a.referenceRecords, _b = _a.translate, translate = _b === void 0 ? function (x) { return x; } : _b;\n    // selectedReferencesDataStatus can be \"empty\" (no data was found for references from input.value)\n    // or \"incomplete\" (Not all of the reference data was found)\n    // or \"ready\" (all references data was found or there is no references from input.value)\n    var selectedReferencesDataStatus = getSelectedReferencesStatus(input, referenceRecords);\n    var matchingReferencesError = isMatchingReferencesError(matchingReferences)\n        ? translate(matchingReferences.error, {\n            _: matchingReferences.error,\n        })\n        : null;\n    return {\n        waiting: (!matchingReferences &&\n            input.value &&\n            selectedReferencesDataStatus === REFERENCES_STATUS_EMPTY) ||\n            (!matchingReferences && !input.value),\n        error: matchingReferencesError &&\n            (!input.value ||\n                (input.value &&\n                    selectedReferencesDataStatus === REFERENCES_STATUS_EMPTY))\n            ? translate('ra.input.references.all_missing', {\n                _: 'ra.input.references.all_missing',\n            })\n            : null,\n        warning: matchingReferencesError ||\n            (input.value &&\n                selectedReferencesDataStatus !== REFERENCES_STATUS_READY)\n            ? matchingReferencesError ||\n                translate('ra.input.references.many_missing', {\n                    _: 'ra.input.references.many_missing',\n                })\n            : null,\n        choices: Array.isArray(matchingReferences)\n            ? matchingReferences\n            : referenceRecords,\n    };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
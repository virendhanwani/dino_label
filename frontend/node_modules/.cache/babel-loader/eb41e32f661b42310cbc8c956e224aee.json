{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport HttpError from './HttpError';\nimport { stringify } from 'query-string';\nexport var createHeadersFromOptions = function (options) {\n  var requestHeaders = options.headers || new Headers({\n    Accept: 'application/json'\n  });\n  if (!requestHeaders.has('Content-Type') && !(options && (!options.method || options.method === 'GET')) && !(options && options.body && options.body instanceof FormData)) {\n    requestHeaders.set('Content-Type', 'application/json');\n  }\n  if (options.user && options.user.authenticated && options.user.token) {\n    requestHeaders.set('Authorization', options.user.token);\n  }\n  return requestHeaders;\n};\nexport var fetchJson = function (url, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var requestHeaders = createHeadersFromOptions(options);\n  return fetch(url, __assign(__assign({}, options), {\n    headers: requestHeaders\n  })).then(function (response) {\n    return response.text().then(function (text) {\n      return {\n        status: response.status,\n        statusText: response.statusText,\n        headers: response.headers,\n        body: text\n      };\n    });\n  }).then(function (_a) {\n    var status = _a.status,\n      statusText = _a.statusText,\n      headers = _a.headers,\n      body = _a.body;\n    var json;\n    try {\n      json = JSON.parse(body);\n    } catch (e) {\n      // not json, no big deal\n    }\n    if (status < 200 || status >= 300) {\n      return Promise.reject(new HttpError(json && json.message || statusText, status, json));\n    }\n    return Promise.resolve({\n      status: status,\n      headers: headers,\n      body: body,\n      json: json\n    });\n  });\n};\nexport var queryParameters = stringify;\nvar isValidObject = function (value) {\n  if (!value) {\n    return false;\n  }\n  var isArray = Array.isArray(value);\n  var isBuffer = typeof Buffer !== 'undefined' && Buffer.isBuffer(value);\n  var isObject = Object.prototype.toString.call(value) === '[object Object]';\n  var hasKeys = !!Object.keys(value).length;\n  return !isArray && !isBuffer && isObject && hasKeys;\n};\nexport var flattenObject = function (value, path) {\n  var _a;\n  if (path === void 0) {\n    path = [];\n  }\n  if (isValidObject(value)) {\n    return Object.assign.apply(Object, __spreadArray([{}], Object.keys(value).map(function (key) {\n      return flattenObject(value[key], path.concat([key]));\n    }), false));\n  } else {\n    return path.length ? (_a = {}, _a[path.join('.')] = value, _a) : value;\n  }\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","l","ar","Array","slice","concat","HttpError","stringify","createHeadersFromOptions","options","requestHeaders","headers","Headers","Accept","has","method","body","FormData","set","user","authenticated","token","fetchJson","url","fetch","then","response","text","status","statusText","_a","json","JSON","parse","e","Promise","reject","message","resolve","queryParameters","isValidObject","value","isArray","isBuffer","Buffer","isObject","toString","hasKeys","keys","flattenObject","path","map","key","join"],"sources":["/node_modules/ra-core/esm/dataProvider/fetch.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport HttpError from './HttpError';\nimport { stringify } from 'query-string';\nexport var createHeadersFromOptions = function (options) {\n    var requestHeaders = (options.headers ||\n        new Headers({\n            Accept: 'application/json',\n        }));\n    if (!requestHeaders.has('Content-Type') &&\n        !(options && (!options.method || options.method === 'GET')) &&\n        !(options && options.body && options.body instanceof FormData)) {\n        requestHeaders.set('Content-Type', 'application/json');\n    }\n    if (options.user && options.user.authenticated && options.user.token) {\n        requestHeaders.set('Authorization', options.user.token);\n    }\n    return requestHeaders;\n};\nexport var fetchJson = function (url, options) {\n    if (options === void 0) { options = {}; }\n    var requestHeaders = createHeadersFromOptions(options);\n    return fetch(url, __assign(__assign({}, options), { headers: requestHeaders }))\n        .then(function (response) {\n        return response.text().then(function (text) { return ({\n            status: response.status,\n            statusText: response.statusText,\n            headers: response.headers,\n            body: text,\n        }); });\n    })\n        .then(function (_a) {\n        var status = _a.status, statusText = _a.statusText, headers = _a.headers, body = _a.body;\n        var json;\n        try {\n            json = JSON.parse(body);\n        }\n        catch (e) {\n            // not json, no big deal\n        }\n        if (status < 200 || status >= 300) {\n            return Promise.reject(new HttpError((json && json.message) || statusText, status, json));\n        }\n        return Promise.resolve({ status: status, headers: headers, body: body, json: json });\n    });\n};\nexport var queryParameters = stringify;\nvar isValidObject = function (value) {\n    if (!value) {\n        return false;\n    }\n    var isArray = Array.isArray(value);\n    var isBuffer = typeof Buffer !== 'undefined' && Buffer.isBuffer(value);\n    var isObject = Object.prototype.toString.call(value) === '[object Object]';\n    var hasKeys = !!Object.keys(value).length;\n    return !isArray && !isBuffer && isObject && hasKeys;\n};\nexport var flattenObject = function (value, path) {\n    var _a;\n    if (path === void 0) { path = []; }\n    if (isValidObject(value)) {\n        return Object.assign.apply(Object, __spreadArray([{}], Object.keys(value).map(function (key) {\n            return flattenObject(value[key], path.concat([key]));\n        }), false));\n    }\n    else {\n        return path.length ? (_a = {}, _a[path.join('.')] = value, _a) : value;\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
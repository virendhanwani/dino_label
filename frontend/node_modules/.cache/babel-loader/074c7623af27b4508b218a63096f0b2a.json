{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { useState, useCallback, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport { useListContext, useResourceContext } from 'ra-core';\nimport { FilterButtonMenuItem } from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nimport { FilterContext } from '../FilterContext';\nvar useStyles = makeStyles({\n  root: {\n    display: 'inline-block'\n  }\n}, {\n  name: 'RaFilterButton'\n});\nvar FilterButton = function (props) {\n  var filtersProp = props.filters,\n    classesOverride = props.classes,\n    className = props.className,\n    rest = __rest(props, [\"filters\", \"classes\", \"className\"]);\n  var filters = useContext(FilterContext) || filtersProp;\n  var resource = useResourceContext(props);\n  var _a = useListContext(props),\n    _b = _a.displayedFilters,\n    displayedFilters = _b === void 0 ? {} : _b,\n    filterValues = _a.filterValues,\n    showFilter = _a.showFilter;\n  var _c = useState(false),\n    open = _c[0],\n    setOpen = _c[1];\n  var anchorEl = useRef();\n  var classes = useStyles(props);\n  if (filters === undefined) {\n    throw new Error('FilterButton requires filters prop to be set');\n  }\n  var hiddenFilters = filters.filter(function (filterElement) {\n    return !filterElement.props.alwaysOn && !displayedFilters[filterElement.props.source] && typeof lodashGet(filterValues, filterElement.props.source) === 'undefined';\n  });\n  var handleClickButton = useCallback(function (event) {\n    // This prevents ghost click.\n    event.preventDefault();\n    setOpen(true);\n    anchorEl.current = event.currentTarget;\n  }, [anchorEl, setOpen]);\n  var handleRequestClose = useCallback(function () {\n    setOpen(false);\n  }, [setOpen]);\n  var handleShow = useCallback(function (_a) {\n    var source = _a.source,\n      defaultValue = _a.defaultValue;\n    showFilter(source, defaultValue);\n    setOpen(false);\n  }, [showFilter, setOpen]);\n  if (hiddenFilters.length === 0) return null;\n  return React.createElement(\"div\", __assign({\n    className: classnames(classes.root, className)\n  }, sanitizeRestProps(rest)), React.createElement(Button, {\n    className: \"add-filter\",\n    label: \"ra.action.add_filter\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClickButton\n  }, React.createElement(ContentFilter, null)), React.createElement(Menu, {\n    open: open,\n    anchorEl: anchorEl.current,\n    onClose: handleRequestClose\n  }, hiddenFilters.map(function (filterElement, index) {\n    return React.createElement(FilterButtonMenuItem, {\n      key: filterElement.props.source,\n      filter: filterElement,\n      resource: resource,\n      onShow: handleShow,\n      autoFocus: index === 0\n    });\n  })));\n};\nvar sanitizeRestProps = function (_a) {\n  var _b = _a.displayedFilters,\n    displayedFilters = _b === void 0 ? null : _b,\n    _c = _a.filterValues,\n    filterValues = _c === void 0 ? null : _c,\n    _d = _a.showFilter,\n    showFilter = _d === void 0 ? null : _d,\n    rest = __rest(_a, [\"displayedFilters\", \"filterValues\", \"showFilter\"]);\n  return rest;\n};\nFilterButton.propTypes = {\n  resource: PropTypes.string,\n  filters: PropTypes.arrayOf(PropTypes.node),\n  displayedFilters: PropTypes.object,\n  filterValues: PropTypes.object,\n  showFilter: PropTypes.func,\n  classes: PropTypes.object,\n  className: PropTypes.string\n};\nexport default FilterButton;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useState","useCallback","useRef","useContext","PropTypes","Menu","makeStyles","ContentFilter","classnames","lodashGet","useListContext","useResourceContext","FilterButtonMenuItem","Button","FilterContext","useStyles","root","display","name","FilterButton","props","filtersProp","filters","classesOverride","classes","className","rest","resource","_a","_b","displayedFilters","filterValues","showFilter","_c","open","setOpen","anchorEl","undefined","Error","hiddenFilters","filter","filterElement","alwaysOn","source","handleClickButton","event","preventDefault","current","currentTarget","handleRequestClose","handleShow","defaultValue","createElement","sanitizeRestProps","label","onClick","onClose","map","index","key","onShow","autoFocus","_d","propTypes","string","arrayOf","node","object","func"],"sources":["/node_modules/ra-ui-materialui/esm/list/filter/FilterButton.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { useState, useCallback, useRef, useContext, } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ContentFilter from '@material-ui/icons/FilterList';\nimport classnames from 'classnames';\nimport lodashGet from 'lodash/get';\nimport { useListContext, useResourceContext } from 'ra-core';\nimport { FilterButtonMenuItem } from './FilterButtonMenuItem';\nimport Button from '../../button/Button';\nimport { FilterContext } from '../FilterContext';\nvar useStyles = makeStyles({\n    root: { display: 'inline-block' },\n}, { name: 'RaFilterButton' });\nvar FilterButton = function (props) {\n    var filtersProp = props.filters, classesOverride = props.classes, className = props.className, rest = __rest(props, [\"filters\", \"classes\", \"className\"]);\n    var filters = useContext(FilterContext) || filtersProp;\n    var resource = useResourceContext(props);\n    var _a = useListContext(props), _b = _a.displayedFilters, displayedFilters = _b === void 0 ? {} : _b, filterValues = _a.filterValues, showFilter = _a.showFilter;\n    var _c = useState(false), open = _c[0], setOpen = _c[1];\n    var anchorEl = useRef();\n    var classes = useStyles(props);\n    if (filters === undefined) {\n        throw new Error('FilterButton requires filters prop to be set');\n    }\n    var hiddenFilters = filters.filter(function (filterElement) {\n        return !filterElement.props.alwaysOn &&\n            !displayedFilters[filterElement.props.source] &&\n            typeof lodashGet(filterValues, filterElement.props.source) ===\n                'undefined';\n    });\n    var handleClickButton = useCallback(function (event) {\n        // This prevents ghost click.\n        event.preventDefault();\n        setOpen(true);\n        anchorEl.current = event.currentTarget;\n    }, [anchorEl, setOpen]);\n    var handleRequestClose = useCallback(function () {\n        setOpen(false);\n    }, [setOpen]);\n    var handleShow = useCallback(function (_a) {\n        var source = _a.source, defaultValue = _a.defaultValue;\n        showFilter(source, defaultValue);\n        setOpen(false);\n    }, [showFilter, setOpen]);\n    if (hiddenFilters.length === 0)\n        return null;\n    return (React.createElement(\"div\", __assign({ className: classnames(classes.root, className) }, sanitizeRestProps(rest)),\n        React.createElement(Button, { className: \"add-filter\", label: \"ra.action.add_filter\", \"aria-haspopup\": \"true\", onClick: handleClickButton },\n            React.createElement(ContentFilter, null)),\n        React.createElement(Menu, { open: open, anchorEl: anchorEl.current, onClose: handleRequestClose }, hiddenFilters.map(function (filterElement, index) { return (React.createElement(FilterButtonMenuItem, { key: filterElement.props.source, filter: filterElement, resource: resource, onShow: handleShow, autoFocus: index === 0 })); }))));\n};\nvar sanitizeRestProps = function (_a) {\n    var _b = _a.displayedFilters, displayedFilters = _b === void 0 ? null : _b, _c = _a.filterValues, filterValues = _c === void 0 ? null : _c, _d = _a.showFilter, showFilter = _d === void 0 ? null : _d, rest = __rest(_a, [\"displayedFilters\", \"filterValues\", \"showFilter\"]);\n    return rest;\n};\nFilterButton.propTypes = {\n    resource: PropTypes.string,\n    filters: PropTypes.arrayOf(PropTypes.node),\n    displayedFilters: PropTypes.object,\n    filterValues: PropTypes.object,\n    showFilter: PropTypes.func,\n    classes: PropTypes.object,\n    className: PropTypes.string,\n};\nexport default FilterButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { useEffect } from 'react';\nimport useGetPermissions from './useGetPermissions';\nimport { useSafeSetState } from '../util/hooks';\nvar emptyParams = {};\n/**\n * Hook for getting user permissions\n *\n * Calls the authProvider.getPermissions() method asynchronously.\n * If the authProvider returns a rejected promise, returns empty permissions.\n *\n * The return value updates according to the request state:\n *\n * - start: { loading: true, loaded: false }\n * - success: { permissions: [any], loading: false, loaded: true }\n * - error: { error: [error from provider], loading: false, loaded: true }\n *\n * Useful to enable features based on user permissions\n *\n * @param {Object} params Any params you want to pass to the authProvider\n *\n * @returns The current auth check state. Destructure as { permissions, error, loading, loaded }.\n *\n * @example\n *     import { usePermissions } from 'react-admin';\n *\n *     const PostDetail = props => {\n *         const { loaded, permissions } = usePermissions();\n *         if (loaded && permissions == 'editor') {\n *             return <PostEdit {...props} />\n *         } else {\n *             return <PostShow {...props} />\n *         }\n *     };\n */\nvar usePermissions = function (params) {\n  if (params === void 0) {\n    params = emptyParams;\n  }\n  var _a = useSafeSetState({\n      loading: true,\n      loaded: false\n    }),\n    state = _a[0],\n    setState = _a[1];\n  var getPermissions = useGetPermissions();\n  useEffect(function () {\n    getPermissions(params).then(function (permissions) {\n      setState({\n        loading: false,\n        loaded: true,\n        permissions: permissions\n      });\n    }).catch(function (error) {\n      setState({\n        loading: false,\n        loaded: true,\n        error: error\n      });\n    });\n  }, [getPermissions, params, setState]);\n  return state;\n};\nexport default usePermissions;","map":{"version":3,"names":["useEffect","useGetPermissions","useSafeSetState","emptyParams","usePermissions","params","_a","loading","loaded","state","setState","getPermissions","then","permissions","catch","error"],"sources":["/node_modules/ra-core/esm/auth/usePermissions.js"],"sourcesContent":["import { useEffect } from 'react';\nimport useGetPermissions from './useGetPermissions';\nimport { useSafeSetState } from '../util/hooks';\nvar emptyParams = {};\n/**\n * Hook for getting user permissions\n *\n * Calls the authProvider.getPermissions() method asynchronously.\n * If the authProvider returns a rejected promise, returns empty permissions.\n *\n * The return value updates according to the request state:\n *\n * - start: { loading: true, loaded: false }\n * - success: { permissions: [any], loading: false, loaded: true }\n * - error: { error: [error from provider], loading: false, loaded: true }\n *\n * Useful to enable features based on user permissions\n *\n * @param {Object} params Any params you want to pass to the authProvider\n *\n * @returns The current auth check state. Destructure as { permissions, error, loading, loaded }.\n *\n * @example\n *     import { usePermissions } from 'react-admin';\n *\n *     const PostDetail = props => {\n *         const { loaded, permissions } = usePermissions();\n *         if (loaded && permissions == 'editor') {\n *             return <PostEdit {...props} />\n *         } else {\n *             return <PostShow {...props} />\n *         }\n *     };\n */\nvar usePermissions = function (params) {\n    if (params === void 0) { params = emptyParams; }\n    var _a = useSafeSetState({\n        loading: true,\n        loaded: false,\n    }), state = _a[0], setState = _a[1];\n    var getPermissions = useGetPermissions();\n    useEffect(function () {\n        getPermissions(params)\n            .then(function (permissions) {\n            setState({ loading: false, loaded: true, permissions: permissions });\n        })\n            .catch(function (error) {\n            setState({\n                loading: false,\n                loaded: true,\n                error: error,\n            });\n        });\n    }, [getPermissions, params, setState]);\n    return state;\n};\nexport default usePermissions;\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,SAASC,eAAe,QAAQ,eAAe;AAC/C,IAAIC,WAAW,GAAG,CAAC,CAAC;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,cAAc,GAAG,SAAAA,CAAUC,MAAM,EAAE;EACnC,IAAIA,MAAM,KAAK,KAAK,CAAC,EAAE;IAAEA,MAAM,GAAGF,WAAW;EAAE;EAC/C,IAAIG,EAAE,GAAGJ,eAAe,CAAC;MACrBK,OAAO,EAAE,IAAI;MACbC,MAAM,EAAE;IACZ,CAAC,CAAC;IAAEC,KAAK,GAAGH,EAAE,CAAC,CAAC,CAAC;IAAEI,QAAQ,GAAGJ,EAAE,CAAC,CAAC,CAAC;EACnC,IAAIK,cAAc,GAAGV,iBAAiB,EAAE;EACxCD,SAAS,CAAC,YAAY;IAClBW,cAAc,CAACN,MAAM,CAAC,CACjBO,IAAI,CAAC,UAAUC,WAAW,EAAE;MAC7BH,QAAQ,CAAC;QAAEH,OAAO,EAAE,KAAK;QAAEC,MAAM,EAAE,IAAI;QAAEK,WAAW,EAAEA;MAAY,CAAC,CAAC;IACxE,CAAC,CAAC,CACGC,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxBL,QAAQ,CAAC;QACLH,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE,IAAI;QACZO,KAAK,EAAEA;MACX,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC,EAAE,CAACJ,cAAc,EAAEN,MAAM,EAAEK,QAAQ,CAAC,CAAC;EACtC,OAAOD,KAAK;AAChB,CAAC;AACD,eAAeL,cAAc"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Children, createElement } from 'react';\nimport warning from '../util/warning';\nimport useAuthenticated from './useAuthenticated';\nimport usePermissionsOptimized from './usePermissionsOptimized';\nvar isEmptyChildren = function (children) {\n  return Children.count(children) === 0;\n};\n/**\n * After checking that the user is authenticated,\n * retrieves the user's permissions for a specific context.\n *\n * Useful for Route components ; used internally by Resource.\n * Use it to decorate your custom page components to require\n * a custom role. It will pass the permissions as a prop to your\n * component.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @example\n *     import { WithPermissions } from 'react-admin';\n *\n *     const Foo = ({ permissions }) => (\n *         {permissions === 'admin' ? <p>Sensitive data</p> : null}\n *         <p>Not sensitive data</p>\n *     );\n *\n *     const customRoutes = [\n *         <Route path=\"/foo\" render={() =>\n *             <WithPermissions\n *                  authParams={{ foo: 'bar' }}\n *                  render={({ permissions, ...props }) => <Foo permissions={permissions} {...props} />}\n *              />\n *         } />\n *     ];\n *     const App = () => (\n *         <Admin customRoutes={customRoutes}>\n *             ...\n *         </Admin>\n *     );\n */\nvar WithPermissions = function (props) {\n  var authParams = props.authParams,\n    children = props.children,\n    render = props.render,\n    component = props.component,\n    staticContext = props.staticContext,\n    rest = __rest(props, [\"authParams\", \"children\", \"render\", \"component\", \"staticContext\"]);\n  warning(render && children && !isEmptyChildren(children) || render && component || component && children && !isEmptyChildren(children), 'You should only use one of the `component`, `render` and `children` props in <WithPermissions>');\n  useAuthenticated(authParams);\n  var permissions = usePermissionsOptimized(authParams).permissions;\n  // render even though the usePermissions() call isn't finished (optimistic rendering)\n  if (component) {\n    return createElement(component, __assign({\n      permissions: permissions\n    }, rest));\n  }\n  // @deprecated\n  if (render) {\n    return render(__assign({\n      permissions: permissions\n    }, rest));\n  }\n  // @deprecated\n  if (children) {\n    return children(__assign({\n      permissions: permissions\n    }, rest));\n  }\n};\nexport default WithPermissions;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Children","createElement","warning","useAuthenticated","usePermissionsOptimized","isEmptyChildren","children","count","WithPermissions","props","authParams","render","component","staticContext","rest","permissions"],"sources":["/node_modules/ra-core/esm/auth/WithPermissions.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Children, createElement } from 'react';\nimport warning from '../util/warning';\nimport useAuthenticated from './useAuthenticated';\nimport usePermissionsOptimized from './usePermissionsOptimized';\nvar isEmptyChildren = function (children) { return Children.count(children) === 0; };\n/**\n * After checking that the user is authenticated,\n * retrieves the user's permissions for a specific context.\n *\n * Useful for Route components ; used internally by Resource.\n * Use it to decorate your custom page components to require\n * a custom role. It will pass the permissions as a prop to your\n * component.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @example\n *     import { WithPermissions } from 'react-admin';\n *\n *     const Foo = ({ permissions }) => (\n *         {permissions === 'admin' ? <p>Sensitive data</p> : null}\n *         <p>Not sensitive data</p>\n *     );\n *\n *     const customRoutes = [\n *         <Route path=\"/foo\" render={() =>\n *             <WithPermissions\n *                  authParams={{ foo: 'bar' }}\n *                  render={({ permissions, ...props }) => <Foo permissions={permissions} {...props} />}\n *              />\n *         } />\n *     ];\n *     const App = () => (\n *         <Admin customRoutes={customRoutes}>\n *             ...\n *         </Admin>\n *     );\n */\nvar WithPermissions = function (props) {\n    var authParams = props.authParams, children = props.children, render = props.render, component = props.component, staticContext = props.staticContext, rest = __rest(props, [\"authParams\", \"children\", \"render\", \"component\", \"staticContext\"]);\n    warning((render && children && !isEmptyChildren(children)) ||\n        (render && component) ||\n        (component && children && !isEmptyChildren(children)), 'You should only use one of the `component`, `render` and `children` props in <WithPermissions>');\n    useAuthenticated(authParams);\n    var permissions = usePermissionsOptimized(authParams).permissions;\n    // render even though the usePermissions() call isn't finished (optimistic rendering)\n    if (component) {\n        return createElement(component, __assign({ permissions: permissions }, rest));\n    }\n    // @deprecated\n    if (render) {\n        return render(__assign({ permissions: permissions }, rest));\n    }\n    // @deprecated\n    if (children) {\n        return children(__assign({ permissions: permissions }, rest));\n    }\n};\nexport default WithPermissions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { useFormState } from 'react-final-form';\nimport get from 'lodash/get';\nimport warning from '../util/warning';\n/**\n * Get the current (edited) value of the record from the form and pass it\n * to a child function\n *\n * @example\n *\n * const PostEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <BooleanInput source=\"hasEmail\" />\n *             <FormDataConsumer>\n *                 {({ formData, ...rest }) => formData.hasEmail &&\n *                      <TextInput source=\"email\" {...rest} />\n *                 }\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example\n *\n * const OrderEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <SelectInput source=\"country\" choices={countries} />\n *             <FormDataConsumer>\n *                 {({ formData, ...rest }) =>\n *                      <SelectInput\n *                          source=\"city\"\n *                          choices={getCitiesFor(formData.country)}\n *                          {...rest}\n *                      />\n *                 }\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     </Edit>\n * );\n */\nvar FormDataConsumer = function (_a) {\n  var subscription = _a.subscription,\n    props = __rest(_a, [\"subscription\"]);\n  var formState = useFormState({\n    subscription: subscription\n  });\n  return React.createElement(FormDataConsumerView, __assign({\n    formData: formState.values\n  }, props));\n};\nexport var FormDataConsumerView = function (props) {\n  var children = props.children,\n    form = props.form,\n    formData = props.formData,\n    source = props.source,\n    index = props.index,\n    rest = __rest(props, [\"children\", \"form\", \"formData\", \"source\", \"index\"]);\n  var scopedFormData = formData;\n  var getSource;\n  var getSourceHasBeenCalled = false;\n  var ret;\n  // If we have an index, we are in an iterator like component (such as the SimpleFormIterator)\n  if (typeof index !== 'undefined') {\n    scopedFormData = get(formData, source);\n    getSource = function (scopedSource) {\n      getSourceHasBeenCalled = true;\n      return source + \".\" + scopedSource;\n    };\n    ret = children(__assign({\n      formData: formData,\n      scopedFormData: scopedFormData,\n      getSource: getSource\n    }, rest));\n  } else {\n    ret = children(__assign({\n      formData: formData\n    }, rest));\n  }\n  warning(typeof index !== 'undefined' && ret && !getSourceHasBeenCalled, \"You're using a FormDataConsumer inside an ArrayInput and you did not call the getSource function supplied by the FormDataConsumer component. This is required for your inputs to get the proper source.\\n\\n<ArrayInput source=\\\"users\\\">\\n    <SimpleFormIterator>\\n        <TextInput source=\\\"name\\\" />\\n\\n        <FormDataConsumer>\\n            {({\\n                formData, // The whole form data\\n                scopedFormData, // The data for this item of the ArrayInput\\n                getSource, // A function to get the valid source inside an ArrayInput\\n                ...rest,\\n            }) =>\\n                scopedFormData.name ? (\\n                    <SelectInput\\n                        source={getSource('role')} // Will translate to \\\"users[0].role\\\"\\n                        choices={[{id: 1, name: 'Admin'}, {id: 2, name: 'User'},\\n                        {...rest}\\n                    />\\n                ) : null\\n            }\\n        </FormDataConsumer>\\n    </SimpleFormIterator>\\n</ArrayInput>\");\n  return ret === undefined ? null : ret;\n};\nexport default FormDataConsumer;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useFormState","get","warning","FormDataConsumer","_a","subscription","props","formState","createElement","FormDataConsumerView","formData","values","children","form","source","index","rest","scopedFormData","getSource","getSourceHasBeenCalled","ret","scopedSource","undefined"],"sources":["/node_modules/ra-core/esm/form/FormDataConsumer.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { useFormState } from 'react-final-form';\nimport get from 'lodash/get';\nimport warning from '../util/warning';\n/**\n * Get the current (edited) value of the record from the form and pass it\n * to a child function\n *\n * @example\n *\n * const PostEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <BooleanInput source=\"hasEmail\" />\n *             <FormDataConsumer>\n *                 {({ formData, ...rest }) => formData.hasEmail &&\n *                      <TextInput source=\"email\" {...rest} />\n *                 }\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example\n *\n * const OrderEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <SelectInput source=\"country\" choices={countries} />\n *             <FormDataConsumer>\n *                 {({ formData, ...rest }) =>\n *                      <SelectInput\n *                          source=\"city\"\n *                          choices={getCitiesFor(formData.country)}\n *                          {...rest}\n *                      />\n *                 }\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     </Edit>\n * );\n */\nvar FormDataConsumer = function (_a) {\n    var subscription = _a.subscription, props = __rest(_a, [\"subscription\"]);\n    var formState = useFormState({ subscription: subscription });\n    return React.createElement(FormDataConsumerView, __assign({ formData: formState.values }, props));\n};\nexport var FormDataConsumerView = function (props) {\n    var children = props.children, form = props.form, formData = props.formData, source = props.source, index = props.index, rest = __rest(props, [\"children\", \"form\", \"formData\", \"source\", \"index\"]);\n    var scopedFormData = formData;\n    var getSource;\n    var getSourceHasBeenCalled = false;\n    var ret;\n    // If we have an index, we are in an iterator like component (such as the SimpleFormIterator)\n    if (typeof index !== 'undefined') {\n        scopedFormData = get(formData, source);\n        getSource = function (scopedSource) {\n            getSourceHasBeenCalled = true;\n            return source + \".\" + scopedSource;\n        };\n        ret = children(__assign({ formData: formData, scopedFormData: scopedFormData, getSource: getSource }, rest));\n    }\n    else {\n        ret = children(__assign({ formData: formData }, rest));\n    }\n    warning(typeof index !== 'undefined' && ret && !getSourceHasBeenCalled, \"You're using a FormDataConsumer inside an ArrayInput and you did not call the getSource function supplied by the FormDataConsumer component. This is required for your inputs to get the proper source.\\n\\n<ArrayInput source=\\\"users\\\">\\n    <SimpleFormIterator>\\n        <TextInput source=\\\"name\\\" />\\n\\n        <FormDataConsumer>\\n            {({\\n                formData, // The whole form data\\n                scopedFormData, // The data for this item of the ArrayInput\\n                getSource, // A function to get the valid source inside an ArrayInput\\n                ...rest,\\n            }) =>\\n                scopedFormData.name ? (\\n                    <SelectInput\\n                        source={getSource('role')} // Will translate to \\\"users[0].role\\\"\\n                        choices={[{id: 1, name: 'Admin'}, {id: 2, name: 'User'},\\n                        {...rest}\\n                    />\\n                ) : null\\n            }\\n        </FormDataConsumer>\\n    </SimpleFormIterator>\\n</ArrayInput>\");\n    return ret === undefined ? null : ret;\n};\nexport default FormDataConsumer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { useNotify, useRedirect, useRefresh, useUnselectAll } from '../sideEffect';\nimport { useMemo } from 'react';\nvar defaultSideEffects = {\n  onSuccess: undefined,\n  onFailure: undefined\n};\nvar useDeclarativeSideEffects = function () {\n  var notify = useNotify();\n  var redirect = useRedirect();\n  var refresh = useRefresh();\n  var unselectAll = useUnselectAll();\n  return useMemo(function () {\n    return function (resource, _a) {\n      var _b = _a === void 0 ? defaultSideEffects : _a,\n        onSuccess = _b.onSuccess,\n        onFailure = _b.onFailure;\n      var convertToFunctionSideEffect = function (resource, sideEffects) {\n        if (!sideEffects || typeof sideEffects === 'function') {\n          return sideEffects;\n        }\n        if (Object.keys(sideEffects).length === 0) {\n          return undefined;\n        }\n        var notification = sideEffects.notification,\n          redirectTo = sideEffects.redirectTo,\n          needRefresh = sideEffects.refresh,\n          needUnselectAll = sideEffects.unselectAll;\n        return function () {\n          if (notification) {\n            notify(notification.body, {\n              type: notification.level,\n              messageArgs: notification.messageArgs\n            });\n          }\n          if (redirectTo) {\n            redirect(redirectTo);\n          }\n          if (needRefresh) {\n            refresh();\n          }\n          if (needUnselectAll) {\n            unselectAll(resource);\n          }\n        };\n      };\n      return {\n        onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n        onFailure: convertToFunctionSideEffect(resource, onFailure)\n      };\n    };\n  }, [notify, redirect, refresh, unselectAll]);\n};\nexport default useDeclarativeSideEffects;","map":{"version":3,"names":["useNotify","useRedirect","useRefresh","useUnselectAll","useMemo","defaultSideEffects","onSuccess","undefined","onFailure","useDeclarativeSideEffects","notify","redirect","refresh","unselectAll","resource","_a","_b","convertToFunctionSideEffect","sideEffects","Object","keys","length","notification","redirectTo","needRefresh","needUnselectAll","body","type","level","messageArgs"],"sources":["/node_modules/ra-core/esm/dataProvider/useDeclarativeSideEffects.js"],"sourcesContent":["import { useNotify, useRedirect, useRefresh, useUnselectAll, } from '../sideEffect';\nimport { useMemo } from 'react';\nvar defaultSideEffects = {\n    onSuccess: undefined,\n    onFailure: undefined,\n};\nvar useDeclarativeSideEffects = function () {\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var unselectAll = useUnselectAll();\n    return useMemo(function () { return function (resource, _a) {\n        var _b = _a === void 0 ? defaultSideEffects : _a, onSuccess = _b.onSuccess, onFailure = _b.onFailure;\n        var convertToFunctionSideEffect = function (resource, sideEffects) {\n            if (!sideEffects || typeof sideEffects === 'function') {\n                return sideEffects;\n            }\n            if (Object.keys(sideEffects).length === 0) {\n                return undefined;\n            }\n            var notification = sideEffects.notification, redirectTo = sideEffects.redirectTo, needRefresh = sideEffects.refresh, needUnselectAll = sideEffects.unselectAll;\n            return function () {\n                if (notification) {\n                    notify(notification.body, {\n                        type: notification.level,\n                        messageArgs: notification.messageArgs,\n                    });\n                }\n                if (redirectTo) {\n                    redirect(redirectTo);\n                }\n                if (needRefresh) {\n                    refresh();\n                }\n                if (needUnselectAll) {\n                    unselectAll(resource);\n                }\n            };\n        };\n        return {\n            onSuccess: convertToFunctionSideEffect(resource, onSuccess),\n            onFailure: convertToFunctionSideEffect(resource, onFailure),\n        };\n    }; }, [notify, redirect, refresh, unselectAll]);\n};\nexport default useDeclarativeSideEffects;\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,WAAW,EAAEC,UAAU,EAAEC,cAAc,QAAS,eAAe;AACnF,SAASC,OAAO,QAAQ,OAAO;AAC/B,IAAIC,kBAAkB,GAAG;EACrBC,SAAS,EAAEC,SAAS;EACpBC,SAAS,EAAED;AACf,CAAC;AACD,IAAIE,yBAAyB,GAAG,SAAAA,CAAA,EAAY;EACxC,IAAIC,MAAM,GAAGV,SAAS,EAAE;EACxB,IAAIW,QAAQ,GAAGV,WAAW,EAAE;EAC5B,IAAIW,OAAO,GAAGV,UAAU,EAAE;EAC1B,IAAIW,WAAW,GAAGV,cAAc,EAAE;EAClC,OAAOC,OAAO,CAAC,YAAY;IAAE,OAAO,UAAUU,QAAQ,EAAEC,EAAE,EAAE;MACxD,IAAIC,EAAE,GAAGD,EAAE,KAAK,KAAK,CAAC,GAAGV,kBAAkB,GAAGU,EAAE;QAAET,SAAS,GAAGU,EAAE,CAACV,SAAS;QAAEE,SAAS,GAAGQ,EAAE,CAACR,SAAS;MACpG,IAAIS,2BAA2B,GAAG,SAAAA,CAAUH,QAAQ,EAAEI,WAAW,EAAE;QAC/D,IAAI,CAACA,WAAW,IAAI,OAAOA,WAAW,KAAK,UAAU,EAAE;UACnD,OAAOA,WAAW;QACtB;QACA,IAAIC,MAAM,CAACC,IAAI,CAACF,WAAW,CAAC,CAACG,MAAM,KAAK,CAAC,EAAE;UACvC,OAAOd,SAAS;QACpB;QACA,IAAIe,YAAY,GAAGJ,WAAW,CAACI,YAAY;UAAEC,UAAU,GAAGL,WAAW,CAACK,UAAU;UAAEC,WAAW,GAAGN,WAAW,CAACN,OAAO;UAAEa,eAAe,GAAGP,WAAW,CAACL,WAAW;QAC9J,OAAO,YAAY;UACf,IAAIS,YAAY,EAAE;YACdZ,MAAM,CAACY,YAAY,CAACI,IAAI,EAAE;cACtBC,IAAI,EAAEL,YAAY,CAACM,KAAK;cACxBC,WAAW,EAAEP,YAAY,CAACO;YAC9B,CAAC,CAAC;UACN;UACA,IAAIN,UAAU,EAAE;YACZZ,QAAQ,CAACY,UAAU,CAAC;UACxB;UACA,IAAIC,WAAW,EAAE;YACbZ,OAAO,EAAE;UACb;UACA,IAAIa,eAAe,EAAE;YACjBZ,WAAW,CAACC,QAAQ,CAAC;UACzB;QACJ,CAAC;MACL,CAAC;MACD,OAAO;QACHR,SAAS,EAAEW,2BAA2B,CAACH,QAAQ,EAAER,SAAS,CAAC;QAC3DE,SAAS,EAAES,2BAA2B,CAACH,QAAQ,EAAEN,SAAS;MAC9D,CAAC;IACL,CAAC;EAAE,CAAC,EAAE,CAACE,MAAM,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,WAAW,CAAC,CAAC;AACnD,CAAC;AACD,eAAeJ,yBAAyB"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport useDataProvider from './useDataProvider';\nimport { useMemo } from 'react';\nimport useDeclarativeSideEffects from './useDeclarativeSideEffects';\nimport { getDataProviderCallArguments } from './getDataProviderCallArguments';\n/**\n * This version of the useDataProvider hook ensure Query and Mutation components are still usable\n * with side effects declared as objects.\n *\n * @deprecated This is for backward compatibility only and will be removed in next major version.\n */\nvar useDataProviderWithDeclarativeSideEffects = function () {\n  var dataProvider = useDataProvider();\n  var getSideEffects = useDeclarativeSideEffects();\n  // @ts-ignore\n  var dataProviderProxy = useMemo(function () {\n    return new Proxy(dataProvider, {\n      get: function (target, name) {\n        if (typeof name === 'symbol') {\n          return;\n        }\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var _a = getDataProviderCallArguments(args),\n            resource = _a.resource,\n            payload = _a.payload,\n            allArguments = _a.allArguments,\n            options = _a.options;\n          var onSuccess;\n          var onFailure;\n          var finalOptions = options;\n          var finalAllArguments = allArguments;\n          if (options && Object.keys(options).some(function (key) {\n            return ['onSuccess', 'onFailure'].includes(key);\n          })) {\n            var sideEffect = getSideEffects(resource, options);\n            var ignoreOnSuccess = options.onSuccess,\n              // Used to extract options without onSuccess\n              ignoreOnFailure = options.onFailure,\n              // Used to extract options without onFailure\n              otherOptions = __rest(options, [\"onSuccess\", \"onFailure\"]);\n            onSuccess = sideEffect.onSuccess;\n            onFailure = sideEffect.onFailure;\n            finalOptions = otherOptions;\n            finalAllArguments = __spreadArray([], args, true).slice(0, args.length - 1);\n          }\n          try {\n            return target[name.toString()].apply(target, typeof resource === 'string' ? [resource, payload, __assign(__assign({}, finalOptions), {\n              onSuccess: onSuccess,\n              onFailure: onFailure\n            })] : finalAllArguments);\n          } catch (e) {\n            // turn synchronous exceptions (e.g. in parameter preparation)\n            // into async ones, otherwise they'll be lost\n            return Promise.reject(e);\n          }\n        };\n      }\n    });\n  }, [dataProvider, getSideEffects]);\n  return dataProviderProxy;\n};\nexport default useDataProviderWithDeclarativeSideEffects;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","useDataProvider","useMemo","useDeclarativeSideEffects","getDataProviderCallArguments","useDataProviderWithDeclarativeSideEffects","dataProvider","getSideEffects","dataProviderProxy","Proxy","get","target","name","args","_i","_a","resource","payload","allArguments","options","onSuccess","onFailure","finalOptions","finalAllArguments","keys","some","key","includes","sideEffect","ignoreOnSuccess","ignoreOnFailure","otherOptions","toString","Promise","reject"],"sources":["/node_modules/ra-core/esm/dataProvider/useDataProviderWithDeclarativeSideEffects.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport useDataProvider from './useDataProvider';\nimport { useMemo } from 'react';\nimport useDeclarativeSideEffects from './useDeclarativeSideEffects';\nimport { getDataProviderCallArguments } from './getDataProviderCallArguments';\n/**\n * This version of the useDataProvider hook ensure Query and Mutation components are still usable\n * with side effects declared as objects.\n *\n * @deprecated This is for backward compatibility only and will be removed in next major version.\n */\nvar useDataProviderWithDeclarativeSideEffects = function () {\n    var dataProvider = useDataProvider();\n    var getSideEffects = useDeclarativeSideEffects();\n    // @ts-ignore\n    var dataProviderProxy = useMemo(function () {\n        return new Proxy(dataProvider, {\n            get: function (target, name) {\n                if (typeof name === 'symbol') {\n                    return;\n                }\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a = getDataProviderCallArguments(args), resource = _a.resource, payload = _a.payload, allArguments = _a.allArguments, options = _a.options;\n                    var onSuccess;\n                    var onFailure;\n                    var finalOptions = options;\n                    var finalAllArguments = allArguments;\n                    if (options &&\n                        Object.keys(options).some(function (key) {\n                            return ['onSuccess', 'onFailure'].includes(key);\n                        })) {\n                        var sideEffect = getSideEffects(resource, options);\n                        var ignoreOnSuccess = options.onSuccess, // Used to extract options without onSuccess\n                        ignoreOnFailure = options.onFailure, // Used to extract options without onFailure\n                        otherOptions = __rest(options, [\"onSuccess\", \"onFailure\"]);\n                        onSuccess = sideEffect.onSuccess;\n                        onFailure = sideEffect.onFailure;\n                        finalOptions = otherOptions;\n                        finalAllArguments = __spreadArray([], args, true).slice(0, args.length - 1);\n                    }\n                    try {\n                        return target[name.toString()].apply(target, typeof resource === 'string'\n                            ? [\n                                resource,\n                                payload,\n                                __assign(__assign({}, finalOptions), { onSuccess: onSuccess, onFailure: onFailure }),\n                            ]\n                            : finalAllArguments);\n                    }\n                    catch (e) {\n                        // turn synchronous exceptions (e.g. in parameter preparation)\n                        // into async ones, otherwise they'll be lost\n                        return Promise.reject(e);\n                    }\n                };\n            },\n        });\n    }, [dataProvider, getSideEffects]);\n    return dataProviderProxy;\n};\nexport default useDataProviderWithDeclarativeSideEffects;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
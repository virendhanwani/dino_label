{"ast":null,"code":"import { useEffect } from 'react';\nimport { useRefresh } from '../sideEffect';\nimport useIsAutomaticRefreshEnabled from './useIsAutomaticRefreshEnabled';\n/**\n * Trigger a refresh of the page when the page comes back from background after a certain delay\n *\n * @param {number} delay Delay in milliseconds since the time the page was hidden. Defaults to 5 minutes.\n */\nvar useRefreshWhenVisible = function (delay) {\n  if (delay === void 0) {\n    delay = 1000 * 60 * 5;\n  }\n  var refresh = useRefresh();\n  var automaticRefreshEnabled = useIsAutomaticRefreshEnabled();\n  useEffect(function () {\n    if (typeof document === 'undefined') return;\n    var lastHiddenTime;\n    var handleVisibilityChange = function () {\n      if (!automaticRefreshEnabled) {\n        return;\n      }\n      if (document.hidden) {\n        // tab goes hidden\n        lastHiddenTime = Date.now();\n      } else {\n        // tab goes visible\n        if (Date.now() - lastHiddenTime > delay) {\n          refresh();\n        }\n        lastHiddenTime = null;\n      }\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange, {\n      capture: true\n    });\n    return function () {\n      return document.removeEventListener('visibilitychange', handleVisibilityChange, {\n        capture: true\n      });\n    };\n  }, [automaticRefreshEnabled, delay, refresh]);\n};\nexport default useRefreshWhenVisible;","map":{"version":3,"names":["useEffect","useRefresh","useIsAutomaticRefreshEnabled","useRefreshWhenVisible","delay","refresh","automaticRefreshEnabled","document","lastHiddenTime","handleVisibilityChange","hidden","Date","now","addEventListener","capture","removeEventListener"],"sources":["/node_modules/ra-core/esm/dataProvider/useRefreshWhenVisible.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useRefresh } from '../sideEffect';\nimport useIsAutomaticRefreshEnabled from './useIsAutomaticRefreshEnabled';\n/**\n * Trigger a refresh of the page when the page comes back from background after a certain delay\n *\n * @param {number} delay Delay in milliseconds since the time the page was hidden. Defaults to 5 minutes.\n */\nvar useRefreshWhenVisible = function (delay) {\n    if (delay === void 0) { delay = 1000 * 60 * 5; }\n    var refresh = useRefresh();\n    var automaticRefreshEnabled = useIsAutomaticRefreshEnabled();\n    useEffect(function () {\n        if (typeof document === 'undefined')\n            return;\n        var lastHiddenTime;\n        var handleVisibilityChange = function () {\n            if (!automaticRefreshEnabled) {\n                return;\n            }\n            if (document.hidden) {\n                // tab goes hidden\n                lastHiddenTime = Date.now();\n            }\n            else {\n                // tab goes visible\n                if (Date.now() - lastHiddenTime > delay) {\n                    refresh();\n                }\n                lastHiddenTime = null;\n            }\n        };\n        document.addEventListener('visibilitychange', handleVisibilityChange, {\n            capture: true,\n        });\n        return function () {\n            return document.removeEventListener('visibilitychange', handleVisibilityChange, { capture: true });\n        };\n    }, [automaticRefreshEnabled, delay, refresh]);\n};\nexport default useRefreshWhenVisible;\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,UAAU,QAAQ,eAAe;AAC1C,OAAOC,4BAA4B,MAAM,gCAAgC;AACzE;AACA;AACA;AACA;AACA;AACA,IAAIC,qBAAqB,GAAG,SAAAA,CAAUC,KAAK,EAAE;EACzC,IAAIA,KAAK,KAAK,KAAK,CAAC,EAAE;IAAEA,KAAK,GAAG,IAAI,GAAG,EAAE,GAAG,CAAC;EAAE;EAC/C,IAAIC,OAAO,GAAGJ,UAAU,EAAE;EAC1B,IAAIK,uBAAuB,GAAGJ,4BAA4B,EAAE;EAC5DF,SAAS,CAAC,YAAY;IAClB,IAAI,OAAOO,QAAQ,KAAK,WAAW,EAC/B;IACJ,IAAIC,cAAc;IAClB,IAAIC,sBAAsB,GAAG,SAAAA,CAAA,EAAY;MACrC,IAAI,CAACH,uBAAuB,EAAE;QAC1B;MACJ;MACA,IAAIC,QAAQ,CAACG,MAAM,EAAE;QACjB;QACAF,cAAc,GAAGG,IAAI,CAACC,GAAG,EAAE;MAC/B,CAAC,MACI;QACD;QACA,IAAID,IAAI,CAACC,GAAG,EAAE,GAAGJ,cAAc,GAAGJ,KAAK,EAAE;UACrCC,OAAO,EAAE;QACb;QACAG,cAAc,GAAG,IAAI;MACzB;IACJ,CAAC;IACDD,QAAQ,CAACM,gBAAgB,CAAC,kBAAkB,EAAEJ,sBAAsB,EAAE;MAClEK,OAAO,EAAE;IACb,CAAC,CAAC;IACF,OAAO,YAAY;MACf,OAAOP,QAAQ,CAACQ,mBAAmB,CAAC,kBAAkB,EAAEN,sBAAsB,EAAE;QAAEK,OAAO,EAAE;MAAK,CAAC,CAAC;IACtG,CAAC;EACL,CAAC,EAAE,CAACR,uBAAuB,EAAEF,KAAK,EAAEC,OAAO,CAAC,CAAC;AACjD,CAAC;AACD,eAAeF,qBAAqB"},"metadata":{},"sourceType":"module"}